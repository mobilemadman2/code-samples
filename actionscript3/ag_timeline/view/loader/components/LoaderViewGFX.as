package net.believecollective.ag2010.view.loader.components {	import net.believecollective.ag2010.app.ApplicationFacade;	import net.believecollective.ag2010.view.loader.components.introanimation.AGExploreButton;	import net.believecollective.ag2010.view.loader.components.introanimation.AGLogoButton;	import net.believecollective.event.AnimationEvent;	import net.believecollective.utils.Tracer;	import net.believecollective.utils.textfields.TextUtils;	import com.greensock.TweenMax;	import flash.display.MovieClip;	import flash.events.Event;	import flash.text.TextField;	/**	 * LoaderViewGFX	 * 	 * @author Dan Mackie (dan@believecollective.net)	 */	public class LoaderViewGFX extends MovieClip {				public var _mcLoaderBar:AGMainLoaderBar;		public var _mcLogo: AGLogoButton;				private var _mcHeaderText : MovieClip;		private var _mcH1 : TextField;		private var _mcH2 : TextField;		private var _mcH3 : TextField;				private var _on : Boolean;				private var _mcExploreBtn : AGExploreButton;					function LoaderViewGFX() {			_mcLogo.x = ApplicationFacade.APP_WIDTH - ApplicationFacade.APP_WIDTH_DEFAULT + 731.137;			_mcLoaderBar.x = _mcLogo.x + 7.6;			_mcLogo._mcOrb.alpha = 0;			_mcLogo._mcKukris.alpha = 0;			fInit();		}		private function fInit() : void {			_mcHeaderText = addChild(new MovieClip()) as MovieClip;			_mcHeaderText.alpha = 0;			/// !!!! NB !!! text is hardcoded ( not pulled from language xml) in order to load text earlier			var t_sFont : String = (ApplicationFacade.LANGUAGE == "ne") ? ApplicationFacade.FONT_GURUMAA : ApplicationFacade.FONT_AUDIMAT_REGULAR;			var t_sH1 : String;			var t_sH2 : String;			var t_sH3 : String;			switch (ApplicationFacade.LANGUAGE){				case "en" :					t_sH1 = "Ayo Gorkhali Timeline";					t_sH2 = "Explore 2,800 years of Gorkhali history";					t_sH3 = "Loading... please wait";				break;				case "cy" :					Tracer.TRACE("!!!Marianne : LoaderViewGFX.fAddText : TODO add Welsh text");					t_sH1 = "Ayo Gorkhali Timeline";					t_sH2 = "Explore 2,800 years of Gorkhali history";					t_sH3 = "Loading... please wait";				break;				case "ne" :					Tracer.TRACE("!!!Marianne : LoaderViewGFX.fAddText : TODO add Nepalese text");					t_sH1 = "Ayo Gorkhali Timeline";					t_sH2 = "Explore 2,800 years of Gorkhali history";					t_sH3 = "Loading... please wait";				break;			}			_mcH1 = _mcHeaderText.addChild(TextUtils.ADDTEXTFIELD(10, [21,100], 32, t_sFont, 0xF26522, t_sH1)) as TextField;			_mcH2 = _mcHeaderText.addChild(TextUtils.ADDTEXTFIELD(10, [21,140], 17, t_sFont, 0xFFFFFF, t_sH2)) as TextField;			_mcH3 = _mcHeaderText.addChild(TextUtils.ADDTEXTFIELD(10, [21,165], 17, t_sFont, 0xFFFFFF, t_sH3)) as TextField;						if (ApplicationFacade.IS_FACEBOOK) _mcHeaderText.y -= 88;						TweenMax.to(_mcHeaderText, ApplicationFacade.TWEEN_DURATION, {autoAlpha: 1});		}		public function fUpdate(arg_n:Number) : void {				switch (arg_n) {				case 1/3:					_mcLoaderBar.fUpdate(1/3);					break;					////					case 2/3:					_mcLoaderBar.fUpdate(2/3);					TweenMax.to(_mcLogo._mcOrb, 0.2, {autoAlpha: 1});					break;					////				case 1:					_mcLoaderBar.fUpdate(1);					TweenMax.to(_mcLogo._mcKukris, 0.2, {autoAlpha: 1});					dispatchEvent(new Event(Event.COMPLETE));//					Delay.DELAYCALLBACK(ApplicationFacade.LOADERDELAY, fDelayedComplete);					break;					////							}		}		public function fEnableExplore(arg_s : String) : void {			TweenMax.to(_mcH3, ApplicationFacade.TWEEN_DURATION, {autoAlpha: 0, onComplete: fGlow});			_mcLoaderBar.play();			_mcExploreBtn = addChild(new AGExploreButton) as AGExploreButton;			_mcExploreBtn.theText = arg_s;			_mcExploreBtn.x = _mcLoaderBar.x;			_mcExploreBtn.y = _mcLoaderBar.y;		}				private function fGlow() : void {			var t_n : Number = (_mcLogo._mcGlow.alpha == 0) ? 1 : 0;			TweenMax.to(_mcLogo._mcGlow, 1, {autoAlpha: t_n, onComplete : fGlow});			TweenMax.to(_mcExploreBtn._mcGlow, 1, {autoAlpha: t_n});		}				public function fToggle(arg_b:Boolean, arg_nTime : Number = ApplicationFacade.FADE_TWEEN_DURATION) : void {			var t_nA : Number = (arg_b) ? 1 : 0 ;			TweenMax.to(this, arg_nTime, {autoAlpha:t_nA, onComplete: fToggled, onCompleteParams : [arg_b]});		}				private function fDelayedComplete() : void {			dispatchEvent(new Event(Event.COMPLETE));		}				private function fToggled(arg_b:Boolean) : void {			_on = arg_b;			dispatchEvent(new AnimationEvent(AnimationEvent.TOGGLED));		}				public function get on() : Boolean {			return _on;		}				public function set on(on : Boolean) : void {			_on = on;		}	}}