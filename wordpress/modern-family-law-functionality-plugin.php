<?php

/**
* Plugin Name: Functionality
* Description: Custom functions for ModernFamilyLaw
* Author:      Marianne Butler
* Version:     1.0.0
* License:     MIT
* Text Domain: functionality
* Domain Path: /languages
*/

add_post_type_support( 'page', 'excerpt' );

function get_my_terms( $post_id, $taxonomy, $num ){
    $cats = get_the_terms( $post_id, $taxonomy );
	if( is_array( $cats ) && ! empty( $cats ) ) {
		return join( ', ', wp_list_pluck( array_slice( $cats, 0, $num ), 'name' ));
	}
	else return '';
}

function get_attorneys($atts) {
	extract(shortcode_atts(
		array(
			'state' => '',
		), $atts));
	$loop = new WP_Query( array ('post_type' => 'attorneys') );
	$string = '<ul class="attorney_feed">';
	while ( $loop->have_posts() ) : $loop->the_post();
		$inc = false;
		if (get_field('include_for_all_locations') || $state === '')  $inc = true;
		else {
			$states = get_field('location_state');
			if ($states && in_array($state, $states)) $inc = true;
		}
		if ($inc) {
			$link = '<a href="'.get_the_permalink().'">';
			$string = $string . '<li><div class="post-summary">';
			$string = $string . $link.get_the_post_thumbnail().'</a>';
			$string = $string . '<div class="post-text">'.$link ;
			$string = $string . '<h4>'.get_the_title().'</h4></a>';
			$string = $string . '<p>'.get_field('title').'</p>';
			$string = $string . '<div  class="more-link">'.$link .'Read Bio <i class="fa fa-chevron-right"></i></a></div>';
			$string = $string . '</div></div></li>';
		}
	endwhile;
	$string = $string.'</ul>';
	wp_reset_query();
	return $string;
}
add_shortcode('attorneys', 'get_attorneys');

function get_blogs($atts) {
	extract(shortcode_atts(
		array(
			'cat' => '',
			'state' => '',
			'level' => 'Primary',
			'count' => 6
		), $atts));
	if ($cat) {
		if ($cat === 'this') $cat = single_cat_title('', false);
		$args = array(
  		'numberposts' => -1,
			'category_name' => $cat
		);
	}
	else $args = array('numberposts' => -1);
	$posts = get_posts( $args );
	$string = '<ul class="blog_feed '.$level.'">';
	foreach ( $posts as $post ) :
  		setup_postdata( $post );
    	$inc = false;
		if ($level === get_field('content_hierarchy', $post->ID)) {
			if (get_field('include_for_all_locations', $post->ID) || $state === '')  $inc = true;
			else {
				$states = get_field('location_state', $post->ID);
				if ($states && in_array($state, $states)) $inc = true;
			}
		}
		if ($inc) {
			$count --;
			$link = '<a href="'.get_the_permalink($post->ID).'" title="Read the full post..." >';
			if ($level === 'Tertiary') {
				/* tertiary */
				$string = $string.'<li><div class="post-summary">';
				$string = $string.$link.'<h6>'.get_the_title($post->ID).'</h6></a>';
			} else {
				/* primary or secondary */
				if ($level === 'Primary') {
					$num = 6;
					$title = '<h4>'.get_the_title($post->ID).'</h4>';
				}
				else {
					$num = 2;
					$title = '<h5>'.get_the_title($post->ID).'</h5>';
				}
				$style = (has_post_thumbnail($post)) ? 'style="background-image: url('.get_the_post_thumbnail_url($post).');"': '';
				$string = $string.'<li><div class="post-summary"'.$style.'>';
				$string = $string.'<div class="post-text">'.$link.$title.'</a>';
				$string = $string.'<small><em>Posted on: '.get_the_date().'</em></small>';
				//$string = $string.'<small class="post-meta">Categorized: '.get_my_terms( $post->ID, 'category', $num).'</small>';
				$string = $string.$link.'<small>Read the post...</small></a></div>';
			}
			$string = $string.'</div></li>';
		}
	if ($count==0) break;
	endforeach;
	$string = $string.'</ul>';
	return $string;
}
add_shortcode('blogs', 'get_blogs');

function get_articles($atts) {
	extract(shortcode_atts(
		array(
			'cat' => '',
			'count' => 4,
			'state' => '',
			'level' => 'Primary',
			'carousel' => false
		), $atts));
	if ($cat) {
		if ($cat === 'this') $cat = get_queried_object();
		$args = array (
			'post_type' => 'articles',
			'posts_per_page'=> -1,
			'tax_query' => array(
				array ('taxonomy' => 'article_category','field' => 'slug','terms' => $cat)
			)
		);
	}
	else {
		$args = array ('post_type' => 'articles', 'posts_per_page' => -1);
	}
	$class = ($level === 'all') ? 'Primary' : $level;
	$string = ($carousel) ? '<div class="carousel"><ul class="article_feed '.$class.'">' : '<div><ul class="article_feed '.$class.'">';
	$loop = new WP_Query( $args );
	while ( $loop->have_posts() ) : $loop->the_post();
		$inc = false;
		if ($level === get_field('content_hierarchy') || $level === 'all') {
			if (get_field('include_for_all_locations') || $state === '')  $inc = true;
			else {
				$states = get_field('location_state');
				if ($states && in_array($state, $states)) $inc = true;
			}
		}
		if ($inc) {
			$count--;
			$title = '<h5 class="title">'.get_the_title($post->ID).'</h5>';
			$link = '<a href="'.get_the_permalink().'" title="Read More" class="more-link">';
			if ($level === 'Tertiary') {
				/* tertiary */
				$string = $string.'<li><div class="">';
				$string = $string.$link.$title.'</a>';
				$string = $string.'</div></li>';
			} else {
				/* primary or secondary */
				if ($level === 'Primary' || $level === 'all') {
					$num = 12;
					$title = '<h4 class="title">'.get_the_title($post->ID).'</h4>';
					$excerpt = '<div class="info">'.get_field('excerpt').'</div>';
				}
				else {
					$num = 2;
					$excerpt = '<div class="info">'.get_field('excerpt2').'</div>';
				}
				if (has_post_thumbnail()) {
					$img_url = get_the_post_thumbnail_url();
				}
				else {
					/* placeholder image */
					$img_url = get_bloginfo( 'stylesheet_directory' ).'/images/placeholder.png"';
				}
				$string = $string.'<li><div class="post-summary">'.$link.'<span class="post-image" style="background-image: url('.$img_url.');"></span></a>';
				$string = $string.'<div class="post-text">'.$link.$title.'</a>';
				//$string = $string.get_the_term_list(get_the_ID(), 'article_category', '<small class="post-meta">Categorized: ', ', ', '</small>');
				//$string = $string.'<small class="post-meta">Categorized: '.get_my_terms( get_the_ID(), 'article_category', $num ).'</small>';
				//$string = $string.'<small>'.$link.'Read More <i class="fa fa-chevron-right"></i></a></small>';
				$string = $string.$excerpt.'</div></div></li>';
			}
		}
	if ($count==0) break;
	endwhile;
	wp_reset_query();
	$string = $string.'</ul></div>';
	return $string;
}
add_shortcode('articles', 'get_articles');

function get_videos($atts) {
	extract(shortcode_atts(
		array(
			'cat' => '',
			'level' => 'Primary',
			'count' => 2
		), $atts));
	if ($cat) {
		$args = array (
			'post_type' => 'videos',
			'posts_per_page'=> -1,
			'tax_query' => array(
				array ('taxonomy' => 'video_category','field' => 'slug','terms' => $cat)
			)
		);
	}
	else {
		$args = array ('post_type' => 'videos', 'posts_per_page' => -1);
	}
	$string = '<ul class="video_feed '.$level.'">';
	$loop = new WP_Query( $args );
	while ( $loop->have_posts() ) : $loop->the_post();
		$inc = false;
		if ($level === get_field('content_hierarchy')) {
			if (get_field('include_for_all_locations') || $state === '')  $inc = true;
			else {
				$states = get_field('location_state');
				if ($states && in_array($state, $states)) $inc = true;
			}
		}
		if ($inc) {
			$count--;
			$link = '<a href="'.get_the_permalink().'" title="Watch the video..." >';
			$title = '<h5 class="title">'.get_the_title().'</h5>';
			if ($level === 'Tertiary') {
				/* tertiary */
				$link = '<a href="'.get_field('video_url').'" class="video_lightbox" title="'.get_the_title().'">';
				$string = $string.'<li>'.$link.$title.'</a></li>';
			}
			else {
				if (has_post_thumbnail()) {
					$img_url = get_the_post_thumbnail_url();
				} else {
					/* placeholder image */
					//$img_url = get_bloginfo( 'stylesheet_directory' ).'/images/video_placeholder.png"';

          $img_url = 'https://img.youtube.com/vi/'.get_field('video_url').'/hqdefault.jpg';
				}
				$link = '<a href="'.get_field('video_url').'" class="video_lightbox" title="'.get_the_title().'" style="background-image:url('.$img_url.');">';
				//$meta = get_the_term_list(get_the_ID(), 'video_category', '<small class="post-meta">Categorized: ', ', ', '</small>');
				$string = $string.'<li>'.$link.$title.'</a>'.$meta.'</li>';
			}
		}
	if ($count==0) break;
	endwhile;
	$string = $string.'</ul>';
	return $string;
}
add_shortcode('videos', 'get_videos');

function get_social_menu() {
	return wp_nav_menu( array( 'container_class' => 'menu-social', 'theme_location' => 'social', 'echo' => false) );
}
add_shortcode('social-menu', 'get_social_menu');

function get_primary_menu() {
	return wp_nav_menu( array( 'container_class' => 'menu-header', 'theme_location' => 'primary', 'echo' => false) );
}
add_shortcode('primary-menu', 'get_primary_menu');

function get_top_menu() {
  $loc = get_location();
	if ($loc) {
		$state = explode("/", $loc)[0];
		$string='<div class="menu-header"><ul id="menu-top-nav" class="menu">';
		$string=$string.'<li><a href="/offices/'.$state.'/our-attorneys/" title="Our attorneys">Our Attorneys</a></li>';
		$string=$string.'<li><a href="/offices/'.$state.'/fees-costs/" title="Fees & Costs">Fees &amp; Costs</a></li>';
		$string=$string.'<li><a href="/offices/'.$loc.'/set-a-consultation/" title="Set a Consultation">Set a Consultation</a></li>';
		$string=$string.'</ul></div>';
	}
	else {
		$string = wp_nav_menu( array( 'container_class' => 'menu-header', 'theme_location' => 'top', 'echo' => false ) );
	}
	return $string;
}
add_shortcode('top-menu', 'get_top_menu');

function get_location_name($atts) {
	extract(shortcode_atts(
		array(
			'prefix' => '',
			'suffix' => ''
		), $atts));
	$loc = get_location();
	if($loc)	{
		$slug = explode("/", $loc)[1];
		$args = array(
			'name'        => $slug,
			'post_type'   => 'location',
			'post_status' => 'publish',
			'numberposts' => 1
		);
		$the_posts = get_posts($args);
		if( $the_posts ) :
	  		return $prefix . get_post_meta( $the_posts[0]->ID, $key = 'location_name', $single = true ). $suffix;
		else :
			return '';
		endif;
	}
	else {
		return '';
	}
}

add_shortcode('location-name', 'get_location_name');

function get_phone() {
	$default = '(720) 699-9255';
	$loc = get_location();
	if($loc)	{
		$slug = explode("/", $loc)[1];
		$args = array(
			'name'        => $slug,
			'post_type'   => 'location',
			'post_status' => 'publish',
			'numberposts' => 1
		);
		$the_posts = get_posts($args);
		if( $the_posts ) :
	  		return get_post_meta( $the_posts[0]->ID, $key = 'phone_number', $single = true );
		else :
			return $default;
		endif;
	}
	else {
		return $default;
	}
}

function phone_link() {
	$phone =  get_phone();
	return '<a class="phone" href="tel:+1'.preg_replace("/[^0-9]/", "", $phone).'" title="'.$phone.'">'.$phone.'</a>';
}
add_shortcode('phone-link', 'phone_link');

function mfl_icon() {
	return '<img src="'.get_bloginfo( 'stylesheet_directory' ).'/images/mfl_icon.svg" alt="icon" />';
}
add_shortcode('mfl-icon', 'mfl_icon');

function mfl_text() {
	return '<span class="logo-head">Modern<span>Family</span>Law</span>';
}
add_shortcode('mfl-text', 'mfl_text');

function page_icon($atts) {
	extract(shortcode_atts(
		array(
			'class' => ''
		), $atts));
	switch($class) {
		case 'divorce':
  		return '<svg version="1.1" id="page-icon-divorce" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 37 37" enable-background="new 0 0 37 37" xml:space="preserve"><path d="M35.864,30.954h-7.272V6.306c0-2.578-2.048-4.676-4.564-4.676H5.236c-2.518,0-4.565,2.098-4.565,4.676 c0,0.343,0.277,0.619,0.619,0.619h5.3v24.648c0,2.578,2.048,4.677,4.564,4.677h20.765c2.517,0,4.564-2.099,4.564-4.677 C36.483,31.23,36.206,30.954,35.864,30.954z M5.439,2.665h15.722c-0.771,0.723-1.492,1.91-1.638,3.021H1.963 C2.247,4.085,3.809,2.665,5.439,2.665z M11.154,35.012c-1.834,0-3.326-1.543-3.326-3.438V6.925h12.253 c0.342,0,0.619-0.276,0.619-0.619c0-1.896,1.492-3.438,3.327-3.438c1.834,0,3.326,1.542,3.326,3.438v25.268 c0,1.364,0.583,2.582,1.496,3.438H11.154z M31.919,35.012c-1.755,0-3.22-1.312-3.524-3.035h7.048 C35.138,33.7,33.674,35.012,31.919,35.012z"/><path d="M26.146,26.177c0-1.672-1.36-3.031-3.032-3.031c-1.673,0-3.033,1.359-3.033,3.031c0,0.729,0.27,1.392,0.701,1.915v4.72 l2.332-1.607l2.33,1.607v-4.718C25.876,27.569,26.146,26.907,26.146,26.177z M23.114,24.146c1.12,0,2.032,0.911,2.032,2.031 s-0.912,2.032-2.032,2.032c-1.121,0-2.033-0.912-2.033-2.032S21.993,24.146,23.114,24.146z M23.114,29.989l-1.332,0.918v-2.02 c0.404,0.199,0.852,0.321,1.332,0.321c0.479,0,0.927-0.122,1.33-0.32v2.019L23.114,29.989z"/><rect x="22.614" y="25.529" width="1" height="1.451"/><rect x="12.952" y="9.03" width="9.349" height="1"/><rect x="9.753" y="12.677" width="15.746" height="1"/><rect x="9.753" y="16.265" width="15.746" height="1"/><rect x="9.753" y="19.854" width="15.746" height="1"/><rect x="9.753" y="23.442" width="9.359" height="1"/><rect x="9.753" y="27.03" width="6.216" height="1"/></svg>';
    break;
		case 'support':
			return '<svg version="1.1" id="page-icon-support" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 37 37" enable-background="new 0 0 37 37" xml:space="preserve"><rect x="20.394" y="5.431" width="0.699" height="0.723"/><rect x="21.651" y="5.431" width="1.201" height="0.723"/><rect x="23.591" y="5.431" width="7.582" height="0.723"/><polygon points="29.492,7.941 28.981,7.431 30.62,5.792 28.981,4.153 29.492,3.643 31.642,5.792 				"/><rect x="13.604" y="5.431" width="0.699" height="0.723"/><rect x="11.844" y="5.431" width="1.2" height="0.723"/><rect x="-0.09" y="5.431" width="11.196" height="0.723"/><rect x="15.435" y="31.604" width="0.699" height="0.723"/><rect x="13.675" y="31.604" width="1.201" height="0.723"/><rect x="5.354" y="31.604" width="7.582" height="0.723"/><polygon points="7.034,29.816 7.546,30.327 5.907,31.966 7.546,33.605 7.034,34.116 4.886,31.966"/><rect x="22.224" y="31.604" width="0.7" height="0.723"/><rect x="23.483" y="31.604" width="1.2" height="0.723"/><rect x="25.421" y="31.604" width="11.196" height="0.723"/><path d="M32.991,27.013h-30.1V10.787h30.1V27.013z M4.16,25.536h27.563V12.265H4.16V25.536z"/><path d="M17.942,21.733c-1.562,0-2.834-1.271-2.834-2.833s1.272-2.833,2.834-2.833s2.833,1.271,2.833,2.833 S19.504,21.733,17.942,21.733z M17.942,16.917c-1.094,0-1.983,0.89-1.983,1.983s0.89,1.983,1.983,1.983s1.983-0.89,1.983-1.983 S19.036,16.917,17.942,16.917z"/><path d="M27.483,23.913H8.4v-0.425c0-1.094-0.89-1.983-1.983-1.983H5.991v-5.21h0.426c1.094,0,1.983-0.89,1.983-1.983v-0.425 h19.083v0.425c0,1.094,0.891,1.983,1.984,1.983h0.425v5.21h-0.425c-1.094,0-1.984,0.89-1.984,1.983V23.913z M9.219,23.062h17.447 c0.185-1.222,1.154-2.19,2.376-2.375v-3.575c-1.222-0.184-2.191-1.153-2.376-2.375H9.219c-0.186,1.222-1.155,2.191-2.377,2.375 v3.575C8.063,20.872,9.033,21.841,9.219,23.062z"/><rect x="5.991" y="13.599" width="0.85" height="0.85"/><rect x="5.991" y="23.352" width="0.85" height="0.85"/><rect x="29.042" y="13.599" width="0.851" height="0.85"/><rect x="29.042" y="23.352" width="0.851" height="0.85"/><rect x="22.915" y="18.476" width="1.516" height="0.85"/><rect x="11.454" y="18.476" width="1.516" height="0.85" /></svg>';
    break;
		case 'custody':
  		return '<svg version="1.1" id="page-icon-custody" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 37 37" enable-background="new 0 0 37 37" xml:space="preserve"><path d="M4.218,22.146c-0.128,0-0.256-0.049-0.354-0.146L1.23,19.365c-0.195-0.195-0.195-0.512,0-0.707L15.502,4.387 c0.017-0.023,0.034-0.045,0.055-0.065l2.634-2.634c0.122-0.123,0.296-0.168,0.451-0.137c0.099,0.017,0.193,0.062,0.268,0.137 l2.633,2.634c0.021,0.021,0.039,0.043,0.056,0.066l14.27,14.271c0.195,0.195,0.195,0.512,0,0.707l-2.634,2.634 c-0.188,0.188-0.52,0.188-0.707,0L18.55,8.021L4.571,21.999C4.474,22.097,4.346,22.146,4.218,22.146z M2.291,19.012l1.927,1.927 L18.196,6.96c0.188-0.188,0.52-0.188,0.707,0L32.88,20.938l1.927-1.927L20.829,5.033c-0.021-0.021-0.039-0.043-0.056-0.066 L18.55,2.742l-2.226,2.226c-0.017,0.023-0.034,0.045-0.055,0.065L2.291,19.012z"/><path d="M5.47,34.791c-0.276,0-0.5-0.224-0.5-0.5V20.393c0-0.276,0.224-0.5,0.5-0.5s0.5,0.224,0.5,0.5v13.898 C5.97,34.567,5.746,34.791,5.47,34.791z"/><path d="M31.628,34.791c-0.276,0-0.5-0.224-0.5-0.5V20.393c0-0.276,0.224-0.5,0.5-0.5s0.5,0.224,0.5,0.5v13.898 C32.128,34.567,31.904,34.791,31.628,34.791z"/> <path d="M31.003,14.999c-0.276,0-0.5-0.224-0.5-0.5V4.016h-4.652v4.832c0,0.276-0.224,0.5-0.5,0.5s-0.5-0.224-0.5-0.5V3.516 c0-0.276,0.224-0.5,0.5-0.5h5.652c0.276,0,0.5,0.224,0.5,0.5v10.983C31.503,14.775,31.279,14.999,31.003,14.999z"/><path d="M34.028,34.791H3.069c-0.276,0-0.5-0.224-0.5-0.5s0.224-0.5,0.5-0.5h30.959c0.276,0,0.5,0.224,0.5,0.5 S34.305,34.791,34.028,34.791z"/><path d="M24.896,28.916c-0.194-0.191-0.509-0.189-0.701,0.006c-0.161,0.165-0.338,0.319-0.525,0.465 c-0.085-0.388-0.192-0.886-0.299-1.381c-0.149-0.688-0.295-1.368-0.368-1.721c0.583,0.68,1.405-0.013,1.405-0.013 c0.076-0.07-0.144-0.099-0.572-0.685c-0.228-0.312-0.312-0.487-0.631-0.849c-0.44-0.5-1.212-0.07-1.444,0.078 c-0.028-0.003-0.056-0.005-0.075-0.005c-0.004,0-0.008,0.001-0.011,0.001c-0.024,0-0.046,0.001-0.062,0.003 c-0.005,0-0.009,0.001-0.013,0.001c-0.026,0.003-0.043,0.005-0.042,0.005h-0.002c-0.001,0.002-0.003,0.002-0.005,0.002 c-0.033,0.003-0.212,0.026-0.483,0.052c-0.028-0.062-0.218-0.412-0.776-0.187c-0.297,0.096-0.755,0.211-1.292,0.229 c-0.21-0.006-0.408-0.028-0.589-0.059c-0.078-1.112-0.489-2.506-1.687-3.636c-0.458-0.434-1.132-0.205-1.558,0.015 c-0.068-0.015-0.137-0.03-0.199-0.044c-0.95-0.209-1.159-0.274-1.168-0.277c-0.029-0.009-0.06-0.013-0.09-0.014 c-0.012,0-0.023,0.001-0.034,0.002c-0.022,0.003-0.042,0.005-0.062,0.011c-0.014,0.003-0.025,0.009-0.038,0.014 c-0.017,0.007-0.031,0.015-0.046,0.024c-0.012,0.007-0.022,0.014-0.034,0.023c-0.016,0.013-0.028,0.029-0.043,0.046 c-0.006,0.007-0.012,0.011-0.018,0.019c-0.062,0.092-0.071,0.205-0.031,0.303c0.012,0.031,0.029,0.059,0.05,0.086l0.232,0.275 l0.139,0.167l-0.84,0.76c-0.13,0.098-0.274,0.226-0.41,0.375c-0.408,0.446-0.739,1.081-0.391,1.675 c0.216,0.37,0.569,0.565,1.02,0.565c0.182,0,0.359-0.032,0.516-0.076c0.261-0.072,0.462-0.176,0.52-0.207l0.349-0.153 c-0.112,0.346-0.187,0.787-0.137,1.312c0.02,0.194,0.104,0.424,0.195,0.665c0.084,0.224,0.176,0.473,0.195,0.647 c0,0.004,0.001,0.01,0.002,0.014l-0.216,0.688l-0.417,1.328c-0.227-0.169-0.439-0.349-0.631-0.543 c-0.192-0.195-0.506-0.197-0.701-0.006c-0.196,0.192-0.198,0.508-0.006,0.703c1.395,1.415,3.644,2.261,6.016,2.261 s4.621-0.846,6.016-2.261C25.094,29.424,25.092,29.108,24.896,28.916z M14.794,29.747l0.677-2.158 c0.011-0.03,0.015-0.062,0.015-0.097c0-0.291-0.122-0.615-0.239-0.929c-0.072-0.193-0.146-0.393-0.156-0.503 c-0.104-1.066,0.427-1.675,0.446-1.698c0.104-0.112,0.114-0.281,0.026-0.404c-0.089-0.125-0.253-0.169-0.393-0.108l-1.206,0.532 c-0.01,0.005-0.02,0.01-0.027,0.014c-0.005,0.003-0.38,0.209-0.735,0.209c-0.221,0-0.364-0.075-0.465-0.246 c-0.286-0.489,0.635-1.213,0.643-1.22c0.009-0.006,0.017-0.012,0.024-0.019l1.081-0.979c0.107-0.099,0.134-0.253,0.074-0.379 c0.218,0.049,0.484,0.107,0.808,0.177c1.006,0.216,1.428,2.326,1.512,3.184c-0.002,0.021,0,0.044,0.003,0.066 c0.013,0.098,0.032,0.167,0.107,0.217l0.124,1.104c0,0,0.031,0.309,0.276,0.479c0.26,0.181,0.756,0.225,1.609,0.225 c0.853,0,1.349-0.044,1.608-0.225c0.246-0.171,0.275-0.479,0.275-0.479l0.115-0.98c0.381-0.034,0.631-0.067,0.657-0.07 c0.005-0.002,0.016-0.003,0.03-0.003c0.146,0,0.507,0.087,0.673,0.888c0.122,0.594,0.542,2.535,0.737,3.437 c-0.018,0.011-0.036,0.022-0.054,0.033l-1.76-1.841c-0.062-0.064-0.146-0.097-0.232-0.097c-0.063,0-0.127,0.018-0.182,0.053 c-0.004,0.003-0.475,0.291-1.981,0.291c-1.493,0-1.973-0.345-1.973-0.345c-0.068-0.057-0.155-0.084-0.242-0.074 c-0.087,0.009-0.168,0.053-0.222,0.123l-1.498,1.947L14.794,29.747z M15.505,30.208l0.278-0.363l1.009-1.311 c0.331,0.146,0.971,0.329,2.094,0.329c0.675,0,1.167-0.054,1.523-0.122c0.253-0.048,0.438-0.104,0.568-0.155l0.99,1.036l0.481,0.504 c-1.045,0.488-2.279,0.762-3.563,0.762C17.677,30.888,16.509,30.645,15.505,30.208z"/><circle cx="14.519" cy="22.881" r="0.25"/></svg>';
    break;
	}
}
add_shortcode('page-icon', 'page_icon');

function calc_icon($atts) {
	extract(shortcode_atts(
		array(
			'class' => '',
			'link' => '',
			'hero' => 0
		), $atts));
	$string = ($link === '') ? '' : '<a href="'.$link.'" class="shd_flyout">';
	if ($hero) {
		$string = $string.'<img src="'.get_bloginfo( 'stylesheet_directory' ).'/images/calculator.svg" alt="calculator" />';
	}
	else {
		switch($class) {
			case 'fees':
				$string=$string.'<svg version="1.1" id="calc_icon_fees" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 37 37" enable-background="new 0 0 37 37" xml:space="preserve"><path d="M13.319,19.255c0.06,0.377,0.18,0.715,0.357,1.006c0.183,0.299,0.416,0.555,0.693,0.763 c0.276,0.205,0.597,0.37,0.953,0.488c0.318,0.106,0.665,0.176,1.031,0.206v0.813c0,0.198,0.06,0.351,0.177,0.451 c0.111,0.098,0.24,0.146,0.384,0.146c0.133,0,0.261-0.048,0.379-0.142c0.129-0.102,0.193-0.254,0.193-0.455v-0.832 c0.322-0.046,0.613-0.129,0.868-0.246c0.29-0.135,0.53-0.314,0.718-0.535c0.388-0.472,0.602-0.981,0.636-1.519 c0.007-0.276-0.007-0.568-0.043-0.869c-0.038-0.313-0.14-0.616-0.301-0.899c-0.164-0.285-0.407-0.545-0.722-0.772 c-0.293-0.212-0.682-0.377-1.156-0.491v-3.644c0.149,0.057,0.281,0.132,0.395,0.224c0.159,0.13,0.294,0.279,0.4,0.444 c0.106,0.166,0.187,0.344,0.238,0.528c0.054,0.189,0.088,0.373,0.104,0.547c0.029,0.313,0.207,0.476,0.494,0.477 c0.184-0.007,0.419-0.104,0.496-0.54c-0.017-0.772-0.232-1.4-0.64-1.866c-0.383-0.438-0.884-0.722-1.487-0.843v-0.828 c0-0.199-0.064-0.353-0.192-0.454c-0.245-0.195-0.55-0.182-0.764,0.004c-0.118,0.102-0.177,0.253-0.177,0.45v0.762 c-0.381,0.056-0.736,0.162-1.059,0.318c-0.357,0.172-0.668,0.391-0.924,0.651c-0.257,0.262-0.455,0.568-0.587,0.912 c-0.134,0.346-0.185,0.716-0.15,1.102c0.082,0.75,0.368,1.36,0.849,1.816c0.456,0.433,1.085,0.703,1.871,0.806v3.49 c-0.588-0.06-1.051-0.236-1.377-0.524c-0.354-0.313-0.581-0.686-0.674-1.086c-0.014-0.191-0.102-0.287-0.174-0.334 c-0.087-0.057-0.198-0.088-0.337-0.098c-0.193-0.024-0.332,0.026-0.422,0.139c-0.087,0.111-0.104,0.258-0.054,0.435H13.319z M15.066,15.513c-0.131-0.147-0.224-0.305-0.276-0.465c-0.056-0.167-0.091-0.33-0.106-0.485c-0.015-0.257,0.019-0.502,0.1-0.729 c0.081-0.229,0.204-0.438,0.362-0.618c0.163-0.169,0.355-0.308,0.573-0.411c0.182-0.087,0.395-0.146,0.636-0.176v3.552 c-0.302-0.065-0.553-0.152-0.749-0.257C15.381,15.802,15.199,15.663,15.066,15.513z M17.487,20.686v-3.26 c0.4,0.138,0.704,0.343,0.907,0.613c0.229,0.305,0.338,0.757,0.324,1.342v0.003c0,0.082-0.019,0.192-0.056,0.327 c-0.035,0.131-0.103,0.267-0.2,0.404c-0.095,0.135-0.235,0.258-0.417,0.366C17.896,20.571,17.71,20.64,17.487,20.686z"/><path d="M35.864,30.954h-7.272V6.306c0-2.578-2.048-4.676-4.564-4.676H5.236c-2.518,0-4.565,2.098-4.565,4.676 c0,0.343,0.277,0.619,0.619,0.619h5.3v24.648c0,2.578,2.048,4.677,4.564,4.677h20.765c2.517,0,4.564-2.099,4.564-4.677 C36.483,31.23,36.206,30.954,35.864,30.954z M5.439,2.665h15.722c-0.771,0.723-1.492,1.91-1.638,3.021H1.963 C2.247,4.085,3.809,2.665,5.439,2.665z M11.154,35.012c-1.834,0-3.326-1.543-3.326-3.438V6.925h12.253 c0.342,0,0.619-0.276,0.619-0.619c0-1.896,1.492-3.438,3.327-3.438c1.834,0,3.326,1.542,3.326,3.438v25.268 c0,1.364,0.583,2.582,1.496,3.438H11.154z M31.919,35.012c-1.755,0-3.22-1.312-3.524-3.035h7.048 C35.138,33.7,33.674,35.012,31.919,35.012z"/><path d="M24.027,27.638H10.687c-0.343,0-0.619,0.276-0.619,0.619c0,0.342,0.276,0.619,0.619,0.619h13.341 c0.342,0,0.619-0.277,0.619-0.619C24.646,27.914,24.369,27.638,24.027,27.638z"/><path d="M24.027,30.954H10.687c-0.343,0-0.619,0.276-0.619,0.619c0,0.342,0.276,0.619,0.619,0.619h13.341 c0.342,0,0.619-0.277,0.619-0.619C24.646,31.23,24.369,30.954,24.027,30.954z"/></svg>';
      break;
			case 'parenting':
				$string=$string.'<svg version="1.1" id="calc_icon_schedule" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 37 37" enable-background="new 0 0 37 37" xml:space="preserve"><path d="M34.94,8.651c0-1.305-0.789-3.771-3.771-3.771h-2.513h-6.756h-6.599H8.547H6.034c-1.304,0-3.77,0.788-3.77,3.771v20.816 c0,1.305,0.789,3.77,3.771,3.77h25.135c1.304,0,3.771-0.788,3.771-3.77L34.94,8.651z M3.521,8.651c0-2.422,2.259-2.512,2.514-2.514 H31.17c2.421,0,2.511,2.258,2.513,2.514v2.905H3.521V8.651z M31.17,31.98H6.036c-2.42,0-2.511-2.259-2.514-2.513L3.521,12.814 h30.162l0.002,16.653C33.685,31.885,31.433,31.978,31.17,31.98z"/><path d="M9.456,19.334H5.753c-0.25,0-0.621-0.188-0.621-0.708v-3.534c0-0.352,0.213-0.707,0.621-0.707h3.703 c0.041,0,0.183,0.008,0.326,0.1c0.11,0.071,0.297,0.245,0.297,0.607v3.534C10.079,18.978,9.865,19.334,9.456,19.334z M5.774,15.013c-0.01,0.025-0.016,0.064-0.016,0.079v3.534c0,0.063,0.013,0.084,0.014,0.084l3.664-0.004 c0.008-0.022,0.016-0.058,0.016-0.084v-3.53c0-0.062-0.013-0.083-0.014-0.083L5.774,15.013z"/><path d="M9.456,24.832H5.753c-0.25,0-0.621-0.188-0.621-0.707v-3.534c0-0.352,0.213-0.707,0.621-0.707h3.703 c0.041,0,0.182,0.007,0.325,0.099c0.111,0.072,0.298,0.245,0.298,0.608v3.534C10.079,24.477,9.865,24.832,9.456,24.832z M5.774,20.511c-0.01,0.026-0.016,0.065-0.016,0.08v3.534c0,0.062,0.013,0.084,0.014,0.084l3.664-0.004 c0.008-0.022,0.016-0.058,0.016-0.084v-3.53c0-0.062-0.013-0.083-0.014-0.084L5.774,20.511z"/><path d="M9.456,30.33H5.753c-0.25,0-0.621-0.188-0.621-0.708v-3.534c0-0.351,0.213-0.706,0.621-0.706h3.703 c0.041,0,0.183,0.007,0.326,0.099c0.11,0.072,0.297,0.245,0.297,0.607v3.534C10.079,29.975,9.865,30.33,9.456,30.33z M5.774,26.009c-0.008,0.022-0.016,0.058-0.016,0.083v3.53c0,0.063,0.013,0.084,0.014,0.084l3.664-0.003 c0.008-0.022,0.016-0.059,0.016-0.084v-3.531c0-0.062-0.013-0.083-0.014-0.083L5.774,26.009z"/><path d="M14.955,19.335h-3.702c-0.251,0-0.623-0.188-0.623-0.708v-3.534c0-0.351,0.214-0.706,0.623-0.706h3.702 c0.04,0,0.182,0.007,0.325,0.099c0.111,0.071,0.299,0.245,0.299,0.607v3.534C15.579,18.979,15.364,19.335,14.955,19.335z M11.273,15.014c-0.009,0.022-0.016,0.057-0.016,0.083v3.53c0,0.063,0.013,0.084,0.013,0.084l3.665-0.004 c0.009-0.022,0.016-0.058,0.017-0.084v-3.53c0-0.062-0.014-0.083-0.014-0.083L11.273,15.014z"/><path d="M14.955,24.833h-3.702c-0.251,0-0.623-0.188-0.623-0.707v-3.534c0-0.352,0.214-0.707,0.623-0.707h3.702 c0.04,0,0.182,0.008,0.325,0.1c0.111,0.07,0.299,0.244,0.299,0.607v3.534C15.579,24.478,15.364,24.833,14.955,24.833z M11.273,20.512c-0.009,0.022-0.016,0.058-0.016,0.084v3.53c0,0.062,0.013,0.084,0.013,0.084l3.665-0.004 c0.009-0.022,0.016-0.058,0.017-0.084v-3.53c0-0.062-0.014-0.083-0.014-0.084L11.273,20.512z"/><path d="M14.955,30.331h-3.702c-0.251,0-0.623-0.188-0.623-0.707v-3.535c0-0.351,0.214-0.706,0.623-0.706h3.702 c0.04,0,0.182,0.008,0.325,0.099c0.111,0.071,0.299,0.245,0.299,0.607v3.535C15.579,29.975,15.364,30.331,14.955,30.331z M11.273,26.01c-0.009,0.022-0.016,0.058-0.016,0.083v3.531c0,0.062,0.013,0.083,0.013,0.084l3.665-0.004 c0.01-0.026,0.017-0.065,0.017-0.08v-3.535c0-0.062-0.014-0.082-0.014-0.083L11.273,26.01z"/><path d="M20.453,19.334h-3.702c-0.25,0-0.622-0.188-0.622-0.708v-3.534c0-0.352,0.214-0.707,0.622-0.707h3.702 c0.04,0,0.182,0.008,0.325,0.1c0.111,0.071,0.298,0.245,0.298,0.607v3.534C21.076,18.978,20.862,19.334,20.453,19.334z M16.772,15.013c-0.01,0.025-0.017,0.064-0.017,0.079v3.534c0,0.063,0.014,0.084,0.014,0.084l3.664-0.004 c0.008-0.022,0.015-0.058,0.016-0.084v-3.53c0-0.062-0.013-0.083-0.013-0.083L16.772,15.013z"/><path d="M20.453,24.832h-3.702c-0.25,0-0.622-0.188-0.622-0.707v-3.534c0-0.352,0.214-0.707,0.622-0.707h3.702 c0.04,0,0.182,0.007,0.325,0.099c0.111,0.071,0.298,0.245,0.298,0.608v3.534C21.076,24.477,20.862,24.832,20.453,24.832z M16.772,20.511c-0.01,0.026-0.017,0.065-0.017,0.08v3.534c0,0.062,0.014,0.084,0.014,0.084l3.664-0.004 c0.009-0.025,0.016-0.065,0.016-0.08v-3.534c0-0.062-0.013-0.083-0.013-0.083L16.772,20.511z"/><path d="M20.453,30.33h-3.702c-0.25,0-0.622-0.188-0.622-0.708v-3.534c0-0.351,0.214-0.706,0.622-0.706h3.702 c0.04,0,0.182,0.007,0.325,0.099c0.111,0.071,0.298,0.245,0.298,0.607v3.534C21.076,29.975,20.862,30.33,20.453,30.33z M16.772,26.009c-0.009,0.022-0.016,0.058-0.017,0.083v3.53c0,0.063,0.014,0.084,0.014,0.084l3.664-0.003 c0.009-0.026,0.016-0.066,0.016-0.081v-3.534c0-0.062-0.013-0.082-0.013-0.083L16.772,26.009z"/><path d="M25.952,19.334H22.25c-0.25,0-0.622-0.188-0.622-0.708v-3.534c0-0.352,0.214-0.707,0.622-0.707h3.702 c0.04,0,0.182,0.008,0.325,0.1c0.111,0.071,0.298,0.245,0.298,0.607v3.534C26.575,18.978,26.361,19.334,25.952,19.334z M22.271,15.013c-0.009,0.025-0.016,0.064-0.016,0.079v3.534c0,0.063,0.014,0.084,0.014,0.084l3.663-0.004 c0.009-0.022,0.016-0.058,0.017-0.084v-3.53c0-0.062-0.014-0.083-0.014-0.083L22.271,15.013z"/><path d="M25.952,24.832H22.25c-0.25,0-0.622-0.188-0.622-0.707v-3.534c0-0.352,0.214-0.707,0.622-0.707h3.702 c0.04,0,0.182,0.007,0.325,0.099c0.111,0.072,0.298,0.245,0.298,0.608v3.534C26.575,24.477,26.361,24.832,25.952,24.832z M22.271,20.511c-0.009,0.026-0.016,0.065-0.016,0.08v3.534c0,0.062,0.014,0.084,0.014,0.084l3.663-0.004 c0.009-0.022,0.016-0.058,0.017-0.084v-3.53c0-0.062-0.014-0.083-0.014-0.084L22.271,20.511z"/><path d="M25.952,30.33H22.25c-0.25,0-0.622-0.188-0.622-0.708v-3.534c0-0.351,0.214-0.706,0.622-0.706h3.702 c0.04,0,0.182,0.007,0.325,0.099c0.111,0.071,0.298,0.245,0.298,0.607v3.534C26.575,29.975,26.361,30.33,25.952,30.33z M22.271,26.009c-0.008,0.022-0.015,0.058-0.016,0.083v3.53c0,0.063,0.014,0.084,0.014,0.084l3.663-0.003 c0.009-0.022,0.016-0.059,0.017-0.084v-3.531c0-0.062-0.014-0.083-0.014-0.083L22.271,26.009z"/><path d="M31.449,19.334h-3.701c-0.25,0-0.622-0.188-0.622-0.708v-3.534c0-0.352,0.214-0.707,0.622-0.707h3.701 c0.04,0,0.183,0.008,0.325,0.1c0.111,0.071,0.299,0.245,0.299,0.607v3.534C32.073,18.978,31.858,19.334,31.449,19.334z M27.769,15.013c-0.01,0.025-0.016,0.064-0.016,0.079v3.534c0,0.063,0.014,0.084,0.014,0.084l3.663-0.004 c0.01-0.025,0.017-0.065,0.017-0.08v-3.534c0-0.062-0.014-0.083-0.014-0.083L27.769,15.013z"/><path d="M31.449,24.832h-3.701c-0.25,0-0.622-0.188-0.622-0.707v-3.534c0-0.352,0.214-0.707,0.622-0.707h3.701 c0.04,0,0.182,0.007,0.325,0.099c0.111,0.071,0.299,0.245,0.299,0.608v3.534C32.073,24.477,31.858,24.832,31.449,24.832z M27.769,20.511c-0.01,0.026-0.016,0.065-0.016,0.08v3.534c0,0.062,0.014,0.084,0.014,0.084l3.663-0.004 c0.009-0.022,0.016-0.058,0.017-0.084v-3.53c0-0.062-0.014-0.083-0.014-0.083L27.769,20.511z"/><path d="M31.449,30.33h-3.701c-0.25,0-0.622-0.188-0.622-0.708v-3.534c0-0.351,0.214-0.706,0.622-0.706h3.701 c0.04,0,0.183,0.007,0.325,0.099c0.111,0.071,0.299,0.245,0.299,0.607v3.534C32.073,29.975,31.858,30.33,31.449,30.33z M27.769,26.009c-0.008,0.022-0.016,0.058-0.016,0.083v3.53c0,0.063,0.014,0.084,0.014,0.084l3.663-0.003 c0.009-0.022,0.016-0.059,0.017-0.084v-3.531c0-0.062-0.014-0.082-0.014-0.083L27.769,26.009z"/><path d="M25.616,8.406H12.275c-0.343,0-0.62,0.276-0.62,0.619c0,0.342,0.277,0.619,0.62,0.619h13.341 c0.342,0,0.619-0.277,0.619-0.619C26.235,8.683,25.958,8.406,25.616,8.406z"/></svg>';
			break;
			case 'maintenance':
				$string=$string.'<svg version="1.1" id="calcu_icon_maintenance" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 37 37" enable-background="new 0 0 37 37" xml:space="preserve"><rect x="20.394" y="5.431" width="0.699" height="0.723"/><rect x="21.651" y="5.431" width="1.201" height="0.723"/><rect x="23.591" y="5.431" width="7.582" height="0.723"/><polygon points="29.492,7.941 28.981,7.431 30.62,5.792 28.981,4.153 29.492,3.643 31.642,5.792"/><rect x="13.604" y="5.431" width="0.699" height="0.723"/><rect x="11.844" y="5.431" width="1.2" height="0.723"/><rect x="-0.09" y="5.431" width="11.196" height="0.723"/><rect x="15.435" y="31.604" width="0.699" height="0.723"/><rect x="13.675" y="31.604" width="1.201" height="0.723"/><rect x="5.354" y="31.604" width="7.582" height="0.723"/><polygon points="7.034,29.816 7.546,30.327 5.907,31.966 7.546,33.605 7.034,34.116 4.886,31.966"/><rect x="22.224" y="31.604" width="0.7" height="0.723"/><rect x="23.483" y="31.604" width="1.2" height="0.723"/><rect x="25.421" y="31.604" width="11.196" height="0.723"/><path d="M32.991,27.013h-30.1V10.787h30.1V27.013z M4.16,25.536h27.563V12.265H4.16V25.536z"/><path d="M17.942,21.733c-1.562,0-2.834-1.271-2.834-2.833s1.272-2.833,2.834-2.833s2.833,1.271,2.833,2.833 S19.504,21.733,17.942,21.733z M17.942,16.917c-1.094,0-1.983,0.89-1.983,1.983s0.89,1.983,1.983,1.983s1.983-0.89,1.983-1.983 S19.036,16.917,17.942,16.917z"/><path d="M27.483,23.913H8.4v-0.425c0-1.094-0.89-1.983-1.983-1.983H5.991v-5.21h0.426c1.094,0,1.983-0.89,1.983-1.983v-0.425 h19.083v0.425c0,1.094,0.891,1.983,1.984,1.983h0.425v5.21h-0.425c-1.094,0-1.984,0.89-1.984,1.983V23.913z M9.219,23.062h17.447 c0.185-1.222,1.154-2.19,2.376-2.375v-3.575c-1.222-0.184-2.191-1.153-2.376-2.375H9.219c-0.186,1.222-1.155,2.191-2.377,2.375 v3.575C8.063,20.872,9.033,21.841,9.219,23.062z"/><rect x="5.991" y="13.599" width="0.85" height="0.85"/><rect x="5.991" y="23.352" width="0.85" height="0.85"/><rect x="29.042" y="13.599" width="0.851" height="0.85"/><rect x="29.042" y="23.352" width="0.851" height="0.85"/><rect x="22.915" y="18.476" width="1.516" height="0.85"/><rect x="11.454" y="18.476" width="1.516" height="0.85"/></svg>';
      break;
			case 'support':
				$string = $string.'<svg version="1.1" id="cal_icon_support" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 37 37" enable-background="new 0 0 37 37" xml:space="preserve"><path marker-start="none" marker-end="none" d="M22.284,36.25c-0.361,0-0.657-0.293-0.657-0.658c0-1.809-1.42-2.739-3.035-2.739 c-1.625,0-3.036,0.949-3.036,2.666c0,0.365-0.294,0.658-0.656,0.658h-4.485c-0.422,0-0.74-0.402-0.637-0.804 c0.303-1.242,0.517-2.191-0.189-3.142L9.253,31.83l-0.706-0.494c-1.243-0.931-2.165-1.99-2.911-3.195L5.02,27.026H3.386 c-0.358,0-0.653-0.292-0.653-0.657v-6.611c0-0.347,0.276-0.638,0.625-0.657l1.438-0.073l0.988-1.351 c0.598-0.713,1.247-1.37,1.935-1.955l0.101-0.072l-0.367-0.566c-0.596-0.985-1.035-1.991-1.364-2.995 c-0.103-0.311,0.048-0.658,0.354-0.803c0.978-0.439,2.165-0.494,3.27-0.238l0.237,0.073L9.688,9.933 c-0.079-0.365,0.16-0.729,0.531-0.785c1.953-0.347,4.233,0.822,5.506,2.648l0.078,0.183l0.611-0.11 c5.051-0.748,10.136,0.604,12.922,3.616c0.342,0.384,0.661,0.785,0.945,1.224l0.258,0.42l0.236-0.018 c0.299,0.036,0.551,0,0.76-0.092l0.139-0.073l-0.128-0.127c-0.074-0.073-0.142-0.146-0.202-0.22 c-0.262-0.329-0.505-0.767-0.553-1.224c-0.056-0.511,0.148-1.004,0.654-1.333c0.264-0.183,0.553-0.293,0.856-0.311 c0.35,0,0.659,0.128,0.892,0.347c0.496,0.457,0.6,1.278,0.467,2.01l-0.061,0.255l0.193-0.237c0.338-0.529,0.354-1.095,0.225-1.625 c-0.09-0.365-0.25-0.694-0.425-0.968c-0.188-0.275-0.346-0.421-0.385-0.439L33.1,13.02c-0.242-0.183-0.337-0.53-0.201-0.804 c0.153-0.329,0.542-0.475,0.874-0.329c0.028,0.019,0.059,0.037,0.088,0.056c0.301,0.163,0.595,0.493,0.829,0.857 c0.245,0.365,0.474,0.841,0.605,1.37c0.268,1.096,0.118,2.411-1.123,3.434c-0.214,0.182-0.464,0.237-0.686,0.255 c-0.19,0-0.39-0.036-0.588-0.108l-0.082-0.037l-0.046,0.055c-0.34,0.311-0.778,0.548-1.307,0.64l-0.277,0.018l0.078,0.183 c1.697,4.2,1.159,9.844-2.644,13.113l-0.859,0.639l-0.207,0.548c-0.187,0.694-0.153,1.461,0.168,2.483 c0.131,0.42-0.186,0.859-0.628,0.859H22.284z M26.557,35.353l-0.074-0.32c-0.173-1.133-0.017-2.095,0.446-3.058 c0.056-0.113,0.137-0.207,0.239-0.283c5.308-3.453,5.166-11.604,1.564-15.51c-4.816-5.229-17.763-5.134-23.428,3.755 c-0.116,0.188-0.319,0.32-0.536,0.32l-1.165,0.056v5.512h1.403c0.263,0,0.498,0.149,0.61,0.376c0.955,1.963,2.161,3.567,4.183,4.869 c0.039,0.02,0.074,0.057,0.109,0.094c1.312,1.303,1.38,2.643,1.184,3.831l-0.066,0.283h3.184l0.029-0.302 c0.483-2.113,2.521-3.133,4.39-3.133c1.88,0,3.91,1.02,4.388,3.189l0.037,0.32H26.557z M8.204,20.543c-0.064,0-0.128,0-0.195-0.036 c-0.345-0.109-0.539-0.475-0.431-0.822c0.104-0.31,0.27-0.693,0.595-0.985c0.162-0.146,0.359-0.256,0.58-0.348 c0.224-0.073,0.464-0.109,0.721-0.109c0.364,0,0.664,0.293,0.664,0.658c0,0.364-0.293,0.657-0.66,0.657 c-0.137,0-0.229,0.019-0.294,0.054c-0.061,0.019-0.105,0.037-0.138,0.073c-0.069,0.056-0.145,0.184-0.214,0.401 C8.748,20.361,8.486,20.543,8.204,20.543z M16.127,15.813c-0.307,0-0.585-0.201-0.653-0.512c-0.074-0.364,0.146-0.712,0.504-0.785 c2.378-0.529,4.467-0.347,6.438,0c0.356,0.055,0.6,0.402,0.535,0.749c-0.061,0.365-0.403,0.603-0.758,0.529 c-1.887-0.311-3.79-0.475-5.938,0C16.216,15.813,16.17,15.813,16.127,15.813z M32.382,15.777l0.019-0.165 c0.004-0.055,0.004-0.128,0-0.183c-0.007-0.146-0.03-0.237-0.055-0.292l-0.036-0.074c-0.035,0.02-0.086,0.038-0.147,0.074 c-0.075,0.055-0.066,0.073-0.063,0.11c0.014,0.108,0.086,0.291,0.275,0.529H32.382z M8.499,15.055l0.355-0.256 c0.631-0.42,1.275-0.816,1.939-1.166l0.925-0.443l-0.489-0.442c-0.422-0.305-0.961-0.583-1.583-0.77 c-0.915-0.28-1.896-0.374-2.751-0.21l-0.076,0.023l0.147,0.396c0.234,0.583,0.508,1.166,0.827,1.749L8.499,15.055z M12.644,12.855 l0.482-0.192c0.319-0.106,0.645-0.212,0.962-0.297l0.606-0.171l-0.577-0.66c-0.929-0.872-2.076-1.404-3.13-1.511l-0.118-0.021 l0.336,1.555l0.035,0.021c0.568,0.341,1.046,0.766,1.387,1.255L12.644,12.855z M19.229,8.991c-2.316,0-4.194-1.876-4.194-4.2 c0-2.309,1.878-4.184,4.194-4.184c2.314,0,4.192,1.875,4.192,4.184C23.422,7.115,21.544,8.991,19.229,8.991z M19.229,8.033 c1.825,0,3.307-1.479,3.307-3.306c0-1.808-1.481-3.306-3.307-3.306c-1.824,0-3.307,1.498-3.307,3.306 C15.923,6.554,17.405,8.033,19.229,8.033z"/></svg>';
      break;
			case 'assets':
				$string = $string.'<svg version="1.1" id="calc_icon_assets" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 37 37" enable-background="new 0 0 37 37" xml:space="preserve"><path d="M35.385,12.877c0.253,0,0.457-0.204,0.457-0.457V8.345c0-0.203-0.134-0.382-0.33-0.438L18.504,2.952 c-0.084-0.025-0.172-0.025-0.255,0L1.242,7.906c-0.195,0.057-0.33,0.235-0.33,0.438v4.075c0,0.253,0.204,0.457,0.456,0.457h2.884 V30.78H2.656c-0.188,0-0.358,0.117-0.427,0.294l-1.288,3.364c-0.053,0.141-0.034,0.299,0.052,0.422 c0.084,0.125,0.227,0.198,0.375,0.198h34.017c0.15,0,0.292-0.073,0.376-0.198c0.086-0.123,0.105-0.281,0.052-0.422l-1.288-3.364 c-0.067-0.177-0.238-0.294-0.428-0.294h-1.594V12.877H35.385z M1.807,8.545l16.57-4.48l16.57,4.48v3.44H1.807V8.545z M8.096,30.78 V12.877h20.562V30.78H8.096z M5.133,13.172h1.962v17.411H5.133V13.172z M34.721,34.145H2.033l0.938-2.449h30.812L34.721,34.145z M31.423,30.583h-1.961V13.172h1.961V30.583z"/><path d="M14.626,24.628c0.062,0.388,0.186,0.736,0.369,1.036c0.188,0.309,0.428,0.572,0.715,0.786 c0.284,0.212,0.614,0.382,0.981,0.504c0.329,0.109,0.687,0.181,1.063,0.212v0.84c0,0.204,0.061,0.36,0.182,0.464 c0.115,0.101,0.248,0.15,0.396,0.15c0.137,0,0.269-0.049,0.391-0.146c0.133-0.104,0.199-0.262,0.199-0.468v-0.859 c0.332-0.047,0.632-0.132,0.895-0.254c0.299-0.139,0.547-0.324,0.74-0.551c0.399-0.486,0.62-1.012,0.655-1.565 c0.007-0.285-0.007-0.586-0.044-0.896c-0.04-0.323-0.145-0.636-0.311-0.928c-0.169-0.294-0.42-0.562-0.743-0.796 c-0.303-0.218-0.704-0.389-1.192-0.506v-3.756c0.153,0.058,0.289,0.135,0.406,0.23c0.164,0.133,0.303,0.287,0.412,0.458 c0.11,0.17,0.193,0.354,0.247,0.544c0.055,0.195,0.09,0.385,0.105,0.563c0.031,0.324,0.214,0.49,0.511,0.492 c0.188-0.008,0.432-0.106,0.511-0.558c-0.018-0.796-0.239-1.443-0.659-1.924c-0.396-0.451-0.911-0.743-1.533-0.868V15.98 c0-0.206-0.066-0.363-0.199-0.469c-0.252-0.201-0.566-0.188-0.787,0.004c-0.121,0.105-0.182,0.262-0.182,0.465v0.785 c-0.393,0.058-0.759,0.167-1.092,0.328c-0.367,0.177-0.688,0.402-0.951,0.671c-0.266,0.27-0.47,0.586-0.605,0.94 c-0.138,0.356-0.19,0.738-0.155,1.136c0.085,0.772,0.379,1.402,0.875,1.872c0.47,0.445,1.118,0.725,1.929,0.83v3.599 c-0.606-0.062-1.083-0.244-1.419-0.541c-0.364-0.322-0.6-0.706-0.695-1.119c-0.015-0.197-0.104-0.296-0.179-0.345 c-0.09-0.058-0.205-0.091-0.348-0.1c-0.199-0.025-0.342,0.026-0.436,0.143C14.59,24.294,14.571,24.444,14.626,24.628L14.626,24.628z M16.427,20.77c-0.135-0.152-0.23-0.313-0.284-0.479c-0.059-0.173-0.095-0.341-0.11-0.5c-0.015-0.266,0.02-0.519,0.103-0.752 c0.084-0.236,0.211-0.452,0.374-0.637c0.168-0.175,0.366-0.317,0.591-0.425c0.188-0.089,0.407-0.149,0.655-0.181v3.662 c-0.311-0.067-0.569-0.157-0.771-0.266C16.751,21.067,16.563,20.925,16.427,20.77z M18.923,26.103v-3.36 c0.412,0.142,0.726,0.354,0.935,0.632c0.237,0.314,0.349,0.78,0.334,1.383v0.004c0,0.084-0.02,0.198-0.057,0.337 c-0.036,0.135-0.105,0.274-0.206,0.416c-0.099,0.14-0.243,0.267-0.43,0.378C19.345,25.984,19.151,26.055,18.923,26.103z"/></svg>';
      break;
		}
 	}
	$string = ($link === '') ? $string : $string.'</a>';
	return $string;
}
add_shortcode('calculator-icon', 'calc_icon');

/* calcualtor shortcodes */
function include_parenting_schedule() {
	wp_register_script( 'parenting-time-calc', get_template_directory_uri() . '/js/parenting-time-schedule/build/static/js/main.js', [], '1.0.5', true );
	wp_register_style( 'parenting-time-calc', get_template_directory_uri() . '/js/parenting-time-schedule/build/static/css/main.css', [], '1.0.5' );
	wp_register_style( 'calculators', get_template_directory_uri() . '/css/calculators.css', [], '1' );

	wp_enqueue_script( 'parenting-time-calc' );
	wp_enqueue_style( 'parenting-time-calc' );
	wp_enqueue_style( 'parenting-schedule-calculators' );

	return '<div id="parenting-time-app-root" class="calculator-app"></div>';
}
add_shortcode('parenting-schedule', 'include_parenting_schedule');

function include_cs_calculator() {
  // Child Support Calculator
	wp_register_script( 'child-support-calc', get_template_directory_uri() . '/js/child-support-calc/build/static/js/main.js', [], '1.0.15', true );
	wp_register_style( 'child-support-calc', get_template_directory_uri() . '/js/child-support-calc/build/static/css/main.css', [], '1.0.15' );
	wp_register_style( 'calculators', get_template_directory_uri() . '/css/calculators.css', [], '1' );
	wp_enqueue_script( 'child-support-calc' );
	wp_enqueue_style( 'child-support-calc' );
	wp_enqueue_style( 'calculators' );
	return '<div id="child-support-app-root" class="calculator-app"></div>';
}
add_shortcode('child-support-calculator', 'include_cs_calculator');

function include_af_calculator() {
  // Fees  Calculator
	wp_register_script( 'attorney-fees-calc', get_template_directory_uri() . '/js/attorney-fees-calc/build/static/js/main.js', [], '1.0.15', true );
	wp_register_style( 'attorney-fees-calc', get_template_directory_uri() . '/js/attorney-fees-calc/build/static/css/main.css', [], '1.0.15' );
	wp_register_style( 'calculators', get_template_directory_uri() . '/css/calculators.css', [], '1' );
	wp_enqueue_script( 'attorney-fees-calc' );
	wp_enqueue_style( 'attorney-fees-calc' );
	wp_enqueue_style( 'attorney-fees-overrides' );
	return '<div id="attorney-fees-app-root" class="calculator-app"></div>';
}
add_shortcode('attorney-fees-calculator', 'include_af_calculator');

function include_maintenance_calculator() {
  // Maintenance Calculator
	wp_register_script( 'spousal-maintenance-calc', get_template_directory_uri() . '/js/spousal-maintenance-calc/build/static/js/main.js', [], '1.0.20', true );
	wp_register_style( 'spousal-maintenance-calc', get_template_directory_uri() . '/js/spousal-maintenance-calc/build/static/css/main.css', [], '1.0.20' );

	wp_enqueue_script( 'spousal-maintenance-calc' );
	wp_enqueue_style( 'spousal-maintenance-calc' );
	wp_enqueue_style( 'calculators' );

	return '<div id="spousal-maintenance-app-root" class="calculator-app"></div>';
}
add_shortcode('maintenance-calculator', 'include_maintenance_calculator');

function include_assets_calculator() {
  // Assets Calculator
	wp_register_script( 'assets-debts-calc', get_template_directory_uri() . '/js/assets-debts-calc/build/static/js/main.js', [], '1.0.15', true );
	wp_register_style( 'assets-debts-calc', get_template_directory_uri() . '/js/assets-debts-calc/build/static/css/main.css', [], '1.0.15' );

	wp_enqueue_script( 'assets-debts-calc' );
	wp_enqueue_style( 'assets-debts-calc' );
	wp_enqueue_style( 'calculators' );

	return '<div id="assets-debts-app-root" class="calculator-app"></div>';
}
add_shortcode('assets-calculator', 'include_assets_calculator');
